<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Unusual Pills ‚Äî Product</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:12 12 14; --fg:245 245 247; --muted:160 160 175;
      --ring:255 255 255 / 18%; --maxw:1100px; --radius:18px;
      --shadow:0 16px 46px rgba(0,0,0,.5);
    }
    html,body{height:100%}
    body{
      margin:0; color:rgb(var(--fg));
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(255,51,204,.2), transparent),
        radial-gradient(800px 400px at 110% 10%, rgba(129,140,248,.18), transparent),
        rgb(var(--bg)) url("static/images/background.png") center/cover fixed no-repeat;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    .wrap{max-width:var(--maxw); margin:24px auto; padding:20px;}
    .crumb{display:inline-flex; gap:8px; align-items:center; color:rgb(var(--muted)); text-decoration:none; font-weight:600}
    .crumb:hover{color:#fff}
    .grid{display:grid; grid-template-columns: 1fr 1fr; gap:28px; margin-top:16px}
    .media{border:1px solid rgba(var(--ring)); border-radius:var(--radius); overflow:hidden; background:rgba(255,255,255,.03)}
    .media img{width:100%; height:auto; display:block; object-fit:cover}
    h1{margin:0; font-size:clamp(24px,3.5vw,36px); line-height:1.1; font-weight:800}
    .price{margin-top:8px; font-weight:800; font-size:18px; opacity:.95}
    .desc{margin-top:12px; color:rgb(var(--muted))}
    .sizes{margin-top:18px}
    .size-grid{display:flex; flex-wrap:wrap; gap:10px; margin-top:10px}
    .size{
      appearance:none; border:1px solid rgba(255,255,255,.25); background:rgba(255,255,255,.06);
      color:#fff; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:800; min-width:56px;
      transition:border-color .2s, transform .08s;
    }
    .size:hover{transform:translateY(-1px); border-color:rgba(255,51,204,.6)}
    .size.selected{border-color:rgba(255,51,204,.85); box-shadow:0 0 0 2px rgba(255,51,204,.25) inset}
    .cta{
      margin-top:18px; display:flex; gap:10px; align-items:center; flex-wrap:wrap;
    }
    .buy{
      display:inline-block; background:#fff; color:#111; font-weight:900; padding:12px 18px; border-radius:14px;
      border:1px solid rgba(255,255,255,.14); text-decoration:none; box-shadow:var(--shadow); transition:transform .08s, box-shadow .2s;
    }
    .buy:hover{transform:translateY(-1px)}
    .note{color:rgb(var(--muted)); font-size:13px}
    .card{border:1px solid rgba(var(--ring)); border-radius:var(--radius); padding:16px; background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02))}
    .oops{padding:24px; text-align:center}
    @media (max-width: 900px){ .grid{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <div class="wrap">
    <a class="crumb" href="merch.html">‚Üê Back to Merch</a>

    <div id="content"></div>
  </div>

  <script>
    // --- tiny product "DB" ---
    const PRODUCTS = {
      // existing slugs can be added later if you want a page for them too
      unusualpollination: {
        name: "Unusual Pollination ‚Ä¢ Tee",
        price: 35,
        image: "static/images/unusualpollination.png",
        sizes: ["S","M","L","XL","XXL"],
        // Your Stripe Payment Link (single link). We'll append ?size= for your reference.
        stripe: "https://buy.stripe.com/14A00kg4a60Uai5a01bfO0c",
        // OPTIONAL: if you make separate links per size later, put them here and we'll use them instead:
        // stripeBySize: { S:"...", M:"...", L:"...", XL:"...", XXL:"..." }
      }
    };

    const $ = (s, r=document) => r.querySelector(s);
    const params = new URLSearchParams(location.search);
    const slug = (params.get('slug')||"").toLowerCase();
    const product = PRODUCTS[slug];

    function render404(){
      $('#content').innerHTML = `
        <div class="card oops">
          <h1>Item not found</h1>
          <p>That product doesn‚Äôt exist. <a href="merch.html">See all merch</a>.</p>
        </div>`;
    }

    function renderProduct(p){
      const root = document.createElement('div');
      root.className = 'grid';
      root.innerHTML = `
        <div class="media"><img src="${p.image}" alt="${p.name}"></div>
        <div>
          <h1>${p.name}</h1>
          <div class="price">$${p.price}</div>
          <p class="desc">Premium cotton tee. True-to-size fit. Screen-printed graphic.</p>

          <div class="sizes">
            <div style="font-weight:800">Select size</div>
            <div class="size-grid" id="sizeGrid">
              ${p.sizes.map(s => `<button class="size" data-size="${s}" type="button">${s}</button>`).join('')}
            </div>
          </div>

          <div class="cta">
            <a id="buyBtn" class="buy" href="#" role="button">Buy</a>
            <span class="note">Free returns/exchanges within 30 days.</span>
          </div>
        </div>
      `;
      $('#content').appendChild(root);

      const sizeBtns = [...root.querySelectorAll('.size')];
      const buyBtn = root.querySelector('#buyBtn');
      const saved = localStorage.getItem('size:'+slug);
      let selected = p.sizes.includes(saved) ? saved : "";

      function setSelected(s){
        selected = s;
        sizeBtns.forEach(b => b.classList.toggle('selected', b.dataset.size === s));
        if (s) localStorage.setItem('size:'+slug, s);
      }
      sizeBtns.forEach(b => b.addEventListener('click', () => setSelected(b.dataset.size)));
      if (selected) setSelected(selected);

      buyBtn.addEventListener('click', (e) => {
        e.preventDefault();
        if (!selected){
          alert('Pick a size first üôè');
          return;
        }
        // Prefer size-specific links if you add them later
        if (p.stripeBySize && p.stripeBySize[selected]){
          location.href = p.stripeBySize[selected];
          return;
        }
        // Otherwise use the single Payment Link and append a size hint.
        // Note: Stripe Payment Links ignore arbitrary params unless you add a Custom Field in dashboard.
        // This at least preserves size in your analytics / logs if you capture URL.
        const url = p.stripe + (p.stripe.includes('?') ? '&' : '?') + 'size=' + encodeURIComponent(selected);
        location.href = url;
      });
    }

    if (!product) render404(); else renderProduct(product);
  </script>
</body>
</html>
